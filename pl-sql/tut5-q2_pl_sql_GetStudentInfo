-- Create Class table first (since Student depends on it)
CREATE TABLE Class (
    ClassID    NUMBER PRIMARY KEY,
    ClassName  VARCHAR2(100)
);

-- Create Student table
CREATE TABLE Student (
    StudentID  NUMBER PRIMARY KEY,
    FirstName  VARCHAR2(50),
    LastName   VARCHAR2(50),
    ClassID    NUMBER,
    CONSTRAINT fk_class FOREIGN KEY (ClassID)
        REFERENCES Class(ClassID)
);

-- Insert sample classes
INSERT INTO Class VALUES (1, 'Mathematics');
INSERT INTO Class VALUES (2, 'Physics');

-- Insert sample students
INSERT INTO Student VALUES (1001, 'John', 'Doe', 1);
INSERT INTO Student VALUES (1002, 'Jane', 'Smith', 2);

-- Create function GetStudentInfo
CREATE OR REPLACE FUNCTION GetStudentInfo (p_StudentID IN NUMBER)
RETURN VARCHAR2
IS
    v_firstname VARCHAR2(20);
    v_lastname VARCHAR2(20);
    v_classname VARCHAR2(20);
BEGIN 
    SELECT s.FirstName, s.LastName, c.ClassName
    INTO v_firstname, v_lastname, v_classname
    FROM STUDENT s
    JOIN CLASS c ON s.ClassID = c.ClassID
    WHERE s.StudentID = p_StudentID;

    RETURN 'Student: ' || v_firstname ||' '|| v_lastname ||', Class: '||v_classname;

EXCEPTION
    WHEN NO_DATA_FOUND THEN
        RETURN 'Studen ID: '||p_StudentID||' not found';
END;

--Run the code
DECLARE
    v_info VARCHAR2(200);
BEGIN
    v_info := GetStudentInfo(1001);
    DBMS_OUTPUT.PUT_LINE(v_info);
    v_info := GetStudentInfo(1003);
    DBMS_OUTPUT.PUT_LINE(v_info);
END;



